trigger:
  batch: true
  branches:
    include:
    - nitishsharma/release-pipelines-1

pr: none

resources:
  repositories:
  - repository: self
    type: git
    ref: refs/heads/release-pipelines-1

jobs:
- job: prelocalization
  displayName: prelocalization
  pool:
    vmImage: ubuntu-latest
  steps:
    - task: CmdLine@2
      displayName: 'Generating xlf files'
      inputs:
        script: |
          sudo npm install -g yarn
          yarn install
          yarn run localize
- job: localization
  displayName: localization
  pool:
    vmImage: windows-latest
  steps:
  - checkout: self
    clean: true
    fetchTags: true
  - task: cesve.one-loc-build.one-loc-build.OneLocBuild@2
    displayName: 'Localization Build: src/LocProject.json'
    inputs:
      locProj: src/LocProject.json
      isCreatePrSelected: true
      repoType: gitHub
      gitHubPatVariable: $(githubPatToken)
      isAutoCompletePrSelected: false
      packageSourceAuth: patAuth
      patVariable: $(OneLocBuildPat)
  - task: PublishBuildArtifacts@1
    displayName: 'Publish Artifact: drop'
